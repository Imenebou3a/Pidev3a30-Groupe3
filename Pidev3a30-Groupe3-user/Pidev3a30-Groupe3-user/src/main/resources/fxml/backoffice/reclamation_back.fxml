<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" 
      fx:controller="tn.esprit.controllers.backoffice.ReclamationBackController"
      spacing="20" style="-fx-background-color: #f5f5f5; -fx-padding: 20;">

    <!-- Header -->
    <HBox alignment="CENTER_LEFT" spacing="20">
        <Label text="Gestion des Réclamations" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #1a7a7a;"/>
        <Region HBox.hgrow="ALWAYS"/>
        
        <!-- Statistics Cards -->
        <VBox alignment="CENTER" spacing="5" style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);">
            <Label text="En Attente" style="-fx-font-size: 11px; -fx-text-fill: #666;"/>
            <Label fx:id="lblEnAttente" text="0" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #f59e0b;"/>
        </VBox>
        
        <VBox alignment="CENTER" spacing="5" style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);">
            <Label text="En Cours" style="-fx-font-size: 11px; -fx-text-fill: #666;"/>
            <Label fx:id="lblEnCours" text="0" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #3b82f6;"/>
        </VBox>
        
        <VBox alignment="CENTER" spacing="5" style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);">
            <Label text="Résolues" style="-fx-font-size: 11px; -fx-text-fill: #666;"/>
            <Label fx:id="lblResolues" text="0" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #10b981;"/>
        </VBox>
    </HBox>

    <!-- Main Content -->
    <HBox spacing="20" VBox.vgrow="ALWAYS">
        
        <!-- Left: Table -->
        <VBox spacing="15" HBox.hgrow="ALWAYS">
            
            <!-- Filters -->
            <HBox spacing="15" alignment="CENTER_LEFT" style="-fx-background-color: white; -fx-padding: 20; -fx-background-radius: 10;">
                <Label text="Rechercher:" style="-fx-font-weight: bold;"/>
                <TextField fx:id="txtRecherche" promptText="Sujet..." prefWidth="200"/>
                
                <Label text="Statut:" style="-fx-font-weight: bold;"/>
                <ComboBox fx:id="comboStatut" prefWidth="130"/>
                
                <Label text="Catégorie:" style="-fx-font-weight: bold;"/>
                <ComboBox fx:id="comboCategorie" prefWidth="130"/>
                
                <Label text="Priorité:" style="-fx-font-weight: bold;"/>
                <ComboBox fx:id="comboPriorite" prefWidth="130"/>
                
                <Button text="Réinitialiser" onAction="#handleReinitialiser" 
                        style="-fx-background-color: #6b7280; -fx-text-fill: white; -fx-padding: 8 20; -fx-background-radius: 5;"/>
                
                <Region HBox.hgrow="ALWAYS"/>
                <Label fx:id="lblStats" text="Total: 0" style="-fx-font-style: italic; -fx-text-fill: #666;"/>
            </HBox>

            <!-- Table -->
            <TableView fx:id="tableReclamations" VBox.vgrow="ALWAYS" 
                       style="-fx-background-color: white; -fx-background-radius: 10;">
                <columns>
                    <TableColumn fx:id="colId" text="ID" prefWidth="50"/>
                    <TableColumn fx:id="colSujet" text="Sujet" prefWidth="200"/>
                    <TableColumn fx:id="colCategorie" text="Catégorie" prefWidth="120"/>
                    <TableColumn fx:id="colStatut" text="Statut" prefWidth="100"/>
                    <TableColumn fx:id="colPriorite" text="Priorité" prefWidth="80"/>
                    <TableColumn fx:id="colUtilisateur" text="Utilisateur" prefWidth="150"/>
                    <TableColumn fx:id="colDate" text="Date" prefWidth="130"/>
                </columns>
            </TableView>
        </VBox>

        <!-- Right: Details Panel -->
        <VBox spacing="15" prefWidth="400" style="-fx-background-color: white; -fx-padding: 20; -fx-background-radius: 10;">
            <Label text="Détails de la Réclamation" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #1a7a7a;"/>
            <Separator/>
            
            <HBox spacing="10">
                <Label text="ID:" style="-fx-font-weight: bold; -fx-min-width: 100;"/>
                <Label fx:id="lblDetailsId" text="-"/>
            </HBox>
            
            <HBox spacing="10">
                <Label text="Sujet:" style="-fx-font-weight: bold; -fx-min-width: 100;"/>
                <Label fx:id="lblDetailsSujet" text="-" wrapText="true"/>
            </HBox>
            
            <HBox spacing="10">
                <Label text="Utilisateur:" style="-fx-font-weight: bold; -fx-min-width: 100;"/>
                <Label fx:id="lblDetailsUtilisateur" text="-"/>
            </HBox>
            
            <HBox spacing="10">
                <Label text="Date:" style="-fx-font-weight: bold; -fx-min-width: 100;"/>
                <Label fx:id="lblDetailsDate" text="-"/>
            </HBox>
            
            <VBox spacing="5">
                <Label text="Description:" style="-fx-font-weight: bold;"/>
                <TextArea fx:id="txtDescription" editable="false" wrapText="true" prefRowCount="4"
                          style="-fx-background-color: #f5f5f5;"/>
            </VBox>
            
            <Separator/>
            
            <VBox spacing="10">
                <Label text="Réponse de l'Administrateur" style="-fx-font-weight: bold; -fx-text-fill: #1a7a7a;"/>
                <TextArea fx:id="txtReponse" promptText="Saisissez votre réponse..." wrapText="true" prefRowCount="5"/>
                
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="Nouveau Statut:" style="-fx-font-weight: bold;"/>
                    <ComboBox fx:id="comboNouveauStatut" prefWidth="150"/>
                </HBox>
                
                <HBox spacing="10">
                    <Button fx:id="btnRepondre" text="Répondre" onAction="#handleRepondre" 
                            style="-fx-background-color: #10b981; -fx-text-fill: white; -fx-padding: 10 30; -fx-background-radius: 5; -fx-font-weight: bold;"
                            HBox.hgrow="ALWAYS" maxWidth="Infinity"/>
                    <Button text="Supprimer" onAction="#handleSupprimer" 
                            style="-fx-background-color: #ef4444; -fx-text-fill: white; -fx-padding: 10 30; -fx-background-radius: 5;"
                            HBox.hgrow="ALWAYS" maxWidth="Infinity"/>
                </HBox>
            </VBox>
        </VBox>
        
    </HBox>

</VBox>
